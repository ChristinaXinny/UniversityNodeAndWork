<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<style type="text/css">
			.box1{
				background-color: black;
				width: 420px;
				height: 735px;
			}
			.box2{
				width: 423px;
				height: 246px;
			}
			.box3{
				margin: 2px;
			}
			.white{
				outline: none;
				font-size: 200%;
				border-width: 0px;
				background-color: #a7a7a7;
				cursor: pointer;
				width: 90px;
				height: 90px;
				border-radius: 50px;
				margin: 2px;
			}
			.yellow{
				outline: none;   
				font-size: 200%;
				color: aliceblue;
				border-width: 0px;
				background-color:#f09b38;
				cursor: pointer;
				width: 90px;
				height: 90px;
				border-radius: 50px;
				margin: 2px;
			}
			.black{
				outline: none;   
				font-size: 200%;
				color: aliceblue;
				border-width: 0px;
				background-color: #333333;
				cursor: pointer;
				width: 90px;
				height: 90px;
				border-radius: 50px;
				margin: 2px;
			}
			.lin{
				outline: none;   
				font-size: 200%;
				color: aliceblue;
				border-width: 0px;
				background-color: #333333;
				cursor: pointer;
				width: 184px;
				height: 90px;
				border-radius: 50px;
				margin: 2px;
			}
			.white:active{
				background-color: #f4f4f4;
			}
			.yellow:active{
				background-color: #ffde7b;
			}
			.black:active{
				background-color: #797979;
			}
			.lin:active{
				background-color: #797979;
			}
			.box1 .box2 {
			    position: relative;
			    width: 360px;
			    height: 250px;
			    background-color: #000000;
			    border-radius: 5px;
			}
			.box1 .box2>p {
			    position: absolute;
			    top: 20%;
			    margin-top: -28px;
			    width: 360px;
			    text-align: left;
			    word-break: break-all;
			    color: #fff;
			    font-size: 400%;
			    font-weight: bold;
			    padding: 10px 10px;
			}
		</style>
	</head>
	<body>
		<center>
			<div class="box1">
				<div class="box2">
					<p></p>		
				</div>
				<div class="box3">
					<div class="">
						<button class="white">C</button>
						<button class="white">A</button>
						<button class="white">%</button>
						<button class="yellow">/</button>
					</div>
					<div class="">
						<button class="black">7</button>
						<button class="black">8</button>
						<button class="black">9</button>
						<button class="yellow">*</button>
					</div>
					<div class="">
						<button class="black">4</button>
						<button class="black">5</button>
						<button class="black">6</button>
						<button class="yellow">-</button>
					</div>
					<div class="">
						<button class="black">1</button>
						<button class="black">2</button>
						<button class="black">3</button>
						<button class="yellow">+</button>
					</div>
					<div class="">
						<button class="lin">0</button>
						<button class="black">.</button>
						<button class="yellow">=</button>
					</div>
				</div>
			</div>
		</center>
		<script type="text/javascript">
			var btn_wrap = document.getElementsByClassName('box3')[0], // 按钮容器
			    content = document.getElementsByTagName('p')[0], // 显示器内容
			    count = 0, //记录显示屏上字符及数字个数
			    bOneDec = false; //表示显示屏一个数字中是否已经有一个小数点的状态
			btn_wrap.onclick = function(e){
			    var target = e.target;
			    if(target.nodeName.toLowerCase() === 'button'){
			        var btnType = target.innerText;
			        if(content.innerText == 'Math Error' && btnType != 'A'){
			            return;
			        }
			        if(btnType == 'C'){
			            bOneDec = false;
			            content.innerText = '0';
			            count = 1;
			        }else if(btnType == 'A'){
			            if(content.innerText != ''){
			                if(content.innerText.length === 1){
			                    content.innerText = '0';
			                }else{
			                    content.innerText = content.innerText.slice(0,-1);
			                }
			                count--;
			            }
			        }else if(btnType == '='){
			            var text = content.innerText;
			            if(!text){
			                return;
			            }else{
			                text = text.replace(/x/g,'*');
			                var result;
			                try{
			                    result = eval(text) + '';
			                    if(result.search(/\./) > 0){
			                        bOneDec = true;
			                        if(result.split('.')[1].length > 5){
			                            result = (+result).toFixed(5);
			                        }
			                    }
			                    content.innerText = result;
			                    count = result.length;
			                }catch(e){
			                    content.innerText = 'Math Error';
			                }
			            }
			        }else{
			            if(isNaN(+btnType) && btnType != '.'){
			                bOneDec = false;
			            }
			            if(btnType == '.'){
			                if(bOneDec){
			                    return;
			                }
			                bOneDec = true;
			            }
			            if(content.innerText == '0' && (!isNaN(+btnType) ||
			            btnType == '(' || btnType == ')')){
			                content.innerText = '';
			            }
			            content.innerText += btnType;
			            if(count++ >= 44){
			                alert('输入的字符过多');
			            }
			        }   
			    }
			}
		</script>
	</body>
</html>
